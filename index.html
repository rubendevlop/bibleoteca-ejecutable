<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Biblioteca JS ‚Äì Panel por categor√≠as</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
  <style>
    :root { --sidebar-w: 300px; }
body{ background:#0b0c10; color:#ffffff; }
.app{ display:flex; min-height:100vh; }
.sidebar{ width:var(--sidebar-w); background:#111318; border-right:1px solid #1f2937; padding:16px; position:sticky; top:0; height:100vh; overflow:auto; }
.sidebar .brand{ font-weight:800; letter-spacing:.5px; }
.sidebar .nav-link{ color:#ffffff; border-radius:10px; }
.sidebar .nav-link.active{ background:#1f2937; color:#fff; }
.content{ flex:1; padding:24px; color:#ffffff; }
.card{ background:#12151d; border:1px solid #1f2937; border-radius:16px; color:#ffffff; }
pre code{ font-size:.95rem; color:inherit; }
.search{ background:#0f172a; border:1px solid #1f2937; color:#e5e7eb; }
.method-badge{ font-size:.75rem; border:1px solid #334155; padding:.15rem .45rem; border-radius:999px; color:#94a3b8; }
.code-toolbar{ position:relative; }
.run-btn{ position:absolute; top:.5rem; right:.5rem; }
.output{ background:#0b1020; border:1px dashed #334155; border-radius:12px; padding:12px; white-space:pre-wrap; min-height:54px; color:#ffffff; }
.footer-note{ color:#ffffff; font-size:.9rem; }
.kbd{ border:1px solid #374151; padding:.05rem .4rem; border-radius:.4rem; font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size:.85em; color:#ffffff; }
.table-sm td, .table-sm th{ padding:.4rem .5rem; color:#ffffff; }
.sticky-header{ position:sticky; top:0; z-index:5; background:#0b0c10; padding-bottom:12px; color:#ffffff; }
</style>
</head>
<body>
  <div class="app">
    <!-- SIDEBAR -->
    <aside class="sidebar">
      <div class="d-flex align-items-center mb-3">
        <span class="brand h5 mb-0">üìö Biblioteca JS</span>
      </div>
      <input id="searchInput" class="form-control search mb-3" placeholder="Buscar m√©todo, tema‚Ä¶" />

      <nav class="nav flex-column gap-1" id="categoryNav">
        <!-- Categor√≠as generadas por JS -->
      </nav>

      <hr class="border-secondary my-3"/>
      <div class="small">
        <div class="mb-1">Atajos:</div>
        <div><span class="kbd">/</span> Buscar</div>
        <div><span class="kbd">‚Üë/‚Üì</span> Navegar</div>
      </div>
    </aside>

    <!-- MAIN CONTENT -->
    <main class="content">
      <div class="sticky-header d-flex flex-wrap align-items-center gap-2">
        <h1 class="h4 mb-0" id="title">Bienvenido</h1>
        <span class="method-badge" id="countBadge">0 items</span>
      </div>
      <p class="text-secondary">Selecciona una categor√≠a del panel izquierdo o busca algo como <code>slice</code>, <code>map</code>, <code>querySelector</code>, <code>for</code>, <code>CRUD</code>‚Ä¶</p>

      <div id="cardsContainer" class="row g-3">
        <!-- Tarjetas generadas por JS -->
      </div>

      <hr class="border-secondary mt-4"/>
      <p class="footer-note">Tip: Todos los ejemplos son ejecutables. Haz clic en <strong>Ejecutar</strong> para ver la salida debajo del c√≥digo. Puedes modificar el snippet antes de ejecutarlo.</p>
    </main>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script>hljs.highlightAll();</script>
  <script>
  // ===== DATASET =====
  /**
   * Cada item: { id, title, kind, category, description, syntax, code }
   * kind: 'm√©todo' | 'concepto' | 'API'
   */
  const DATA = [
    // ==== STRING METHODS ====
    {
      id: 'str-length',
      title: 'length',
      kind: 'm√©todo',
      category: 'String',
      description: 'Devuelve la longitud de la cadena (propiedad).',
      syntax: 'str.length',
      code: `const s = "Hola mundo";\nconsole.log(s.length); // 10`
    },
    {
      id: 'str-toLowerCase',
      title: 'toLowerCase()',
      kind: 'm√©todo',
      category: 'String',
      description: 'Convierte a min√∫sculas.',
      syntax: 'str.toLowerCase()',
      code: `console.log('JAVASCRIPT'.toLowerCase());`
    },
    {
      id: 'str-toUpperCase',
      title: 'toUpperCase()',
      kind: 'm√©todo',
      category: 'String',
      description: 'Convierte a may√∫sculas.',
      syntax: 'str.toUpperCase()',
      code: `console.log('hola'.toUpperCase());`
    },
    {
      id: 'str-slice',
      title: 'slice()',
      kind: 'm√©todo',
      category: 'String',
      description: 'Extrae parte de la cadena sin modificar la original.',
      syntax: 'str.slice(inicio, fin?)',
      code: `const s = 'programaci√≥n';\nconsole.log(s.slice(0,5)); // 'progr'\nconsole.log(s.slice(-3)); // '√≥n'`
    },
    {
      id: 'str-substring',
      title: 'substring()',
      kind: 'm√©todo',
      category: 'String',
      description: 'Similar a slice pero sin √≠ndices negativos.',
      syntax: 'str.substring(inicio, fin?)',
      code: `const s = 'frontend';\nconsole.log(s.substring(0,5)); // 'front'`
    },
    {
      id: 'str-replace',
      title: 'replace() / replaceAll()',
      kind: 'm√©todo',
      category: 'String',
      description: 'Reemplaza coincidencias. Usar replaceAll para todas.',
      syntax: 'str.replace(busca, reemplazo)',
      code: `console.log('a_a_a'.replaceAll('_','-')); // a-a-a`
    },
    {
      id: 'str-trim',
      title: 'trim()',
      kind: 'm√©todo',
      category: 'String',
      description: 'Elimina espacios al inicio y final.',
      syntax: 'str.trim()',
      code: `console.log('  hola  '.trim());`
    },
    {
      id: 'str-includes',
      title: 'includes()',
      kind: 'm√©todo',
      category: 'String',
      description: 'Comprueba si contiene un substring.',
      syntax: 'str.includes(sub, desde?)',
      code: `console.log('documentaci√≥n'.includes('doc')); // true`
    },
    // ==== STRING M√âTODOS AMPLIADOS (sin ${}) ====
{
  id: 'str-charAt',
  title: 'charAt()',
  kind: 'm√©todo',
  category: 'String',
  description: 'Devuelve el car√°cter en la posici√≥n indicada.',
  syntax: 'str.charAt(pos)',
  code: "const texto = 'Hola';\nconsole.log(texto.charAt(0)); // H"
},
{
  id: 'str-charCodeAt',
  title: 'charCodeAt()',
  kind: 'm√©todo',
  category: 'String',
  description: 'Devuelve el c√≥digo Unicode del car√°cter en la posici√≥n dada.',
  syntax: 'str.charCodeAt(pos)',
  code: "console.log('A'.charCodeAt(0)); // 65"
},
{
  id: 'str-indexOf',
  title: 'indexOf() / lastIndexOf()',
  kind: 'm√©todo',
  category: 'String',
  description: 'Busca una subcadena y devuelve la posici√≥n de la primera o √∫ltima aparici√≥n.',
  syntax: 'str.indexOf(sub, desde?)',
  code: "const t = 'banana';\nconsole.log(t.indexOf('a'));     // 1\nconsole.log(t.lastIndexOf('a')); // 5"
},
{
  id: 'str-startsEndsWith',
  title: 'startsWith() / endsWith()',
  kind: 'm√©todo',
  category: 'String',
  description: 'Comprueba si una cadena comienza o termina con una subcadena determinada.',
  syntax: 'str.startsWith(sub), str.endsWith(sub)',
  code: "const nombre = 'JavaScript';\nconsole.log(nombre.startsWith('Java')); // true\nconsole.log(nombre.endsWith('Script')); // true"
},
{
  id: 'str-repeat',
  title: 'repeat()',
  kind: 'm√©todo',
  category: 'String',
  description: 'Repite una cadena el n√∫mero de veces indicado.',
  syntax: 'str.repeat(n)',
  code: "console.log('Hi '.repeat(3)); // Hi Hi Hi "
},
{
  id: 'str-split',
  title: 'split()',
  kind: 'm√©todo',
  category: 'String',
  description: 'Divide la cadena en un array seg√∫n un separador.',
  syntax: 'str.split(separador)',
  code: "const csv = 'rojo,verde,azul';\nconsole.log(csv.split(',')); // ['rojo','verde','azul']"
},
{
  id: 'str-concat',
  title: 'concat()',
  kind: 'm√©todo',
  category: 'String',
  description: 'Une dos o m√°s cadenas. Equivalente a usar +.',
  syntax: 'str.concat(otra)',
  code: "console.log('Hola'.concat(' ', 'mundo')); // Hola mundo"
},
{
  id: 'str-padStartEnd',
  title: 'padStart() / padEnd()',
  kind: 'm√©todo',
  category: 'String',
  description: 'Rellena la cadena hasta alcanzar una longitud espec√≠fica.',
  syntax: 'str.padStart(long, relleno)',
  code: "console.log('5'.padStart(3, '0')); // 005\nconsole.log('7'.padEnd(4, '.')); // 7..."
},
{
  id: 'str-match',
  title: 'match() / matchAll()',
  kind: 'm√©todo',
  category: 'String',
  description: 'Busca coincidencias con una expresi√≥n regular.',
  syntax: 'str.match(regex)',
  code: "const frase = 'uno dos tres dos';\nconsole.log(frase.match(/dos/g)); // ['dos','dos']"
},
{
  id: 'str-search',
  title: 'search()',
  kind: 'm√©todo',
  category: 'String',
  description: 'Devuelve el √≠ndice de la primera coincidencia de una expresi√≥n regular.',
  syntax: 'str.search(regex)',
  code: "const txt = 'La casa es verde';\nconsole.log(txt.search(/verde/)); // 11"
},
{
  id: 'str-localeCompare',
  title: 'localeCompare()',
  kind: 'm√©todo',
  category: 'String',
  description: 'Compara dos cadenas seg√∫n las reglas del idioma local.',
  syntax: 'str.localeCompare(otra)',
  code: "console.log('a'.localeCompare('b')); // -1"
},
{
  id: 'str-normalize',
  title: 'normalize()',
  kind: 'm√©todo',
  category: 'String',
  description: 'Normaliza la representaci√≥n Unicode (por ejemplo, elimina acentos combinados).',
  syntax: 'str.normalize(form)',
  code: "const t = 'caf√©';\nconsole.log(t.normalize('NFD'));"
},
{
  id: 'str-raw',
  title: 'String.raw',
  kind: 'm√©todo est√°tico',
  category: 'String',
  description: 'Devuelve una cadena ‚Äúsin escapar‚Äù √∫til para plantillas literales.',
  syntax: 'String.raw(texto)',
  code: "console.log(String.raw`Hola\\nMundo`); // Muestra los caracteres de escape"
},
// ==== STRING M√âTODOS MODERNOS (replace / regex) ====
{
  id: 'str-replace-basic',
  title: 'replace()',
  kind: 'm√©todo',
  category: 'String',
  description: 'Reemplaza la primera coincidencia de un valor o patr√≥n por otro. Si se usa una expresi√≥n regular con la bandera global, reemplaza todas.',
  syntax: 'str.replace(valor, nuevoValor)',
  code: "const texto = 'JavaScript es genial. Amo JavaScript!';\nconst nuevo = texto.replace('JavaScript', 'JS');\nconsole.log(nuevo); // JS es genial. Amo JavaScript!"
},
{
  id: 'str-replace-global',
  title: 'replace() con regex global',
  kind: 'm√©todo',
  category: 'String',
  description: 'Para reemplazar todas las coincidencias, se usa una expresi√≥n regular con la bandera g (global).',
  syntax: 'str.replace(/regex/g, nuevoValor)',
  code: "const texto = 'JavaScript es genial. Amo JavaScript!';\nconst nuevo = texto.replace(/JavaScript/g, 'JS');\nconsole.log(nuevo); // JS es genial. Amo JS!"
},
{
  id: 'str-replaceAll',
  title: 'replaceAll()',
  kind: 'm√©todo',
  category: 'String',
  description: 'Reemplaza todas las coincidencias exactas sin necesidad de usar expresiones regulares. Es sensible a may√∫sculas/min√∫sculas.',
  syntax: 'str.replaceAll(valor, nuevoValor)',
  code: "const t = 'a_a_a_a';\nconsole.log(t.replaceAll('_','-')); // a-a-a-a"
},
{
  id: 'str-matchAll',
  title: 'matchAll()',
  kind: 'm√©todo',
  category: 'String',
  description: 'Devuelve un iterador con todas las coincidencias de una expresi√≥n regular, incluyendo grupos de captura.',
  syntax: 'str.matchAll(regex)',
  code: "const frase = 'x1 y2 z3';\nconst regex = /([a-z])(\\d)/g;\nfor (const m of frase.matchAll(regex)) {\n  console.log('Letra:', m[1], 'N√∫mero:', m[2]);\n}"
},
{
  id: 'str-replace-func',
  title: 'replace() con funci√≥n',
  kind: 'm√©todo',
  category: 'String',
  description: 'El segundo argumento de replace puede ser una funci√≥n que recibe la coincidencia y retorna el reemplazo din√°mico.',
  syntax: 'str.replace(regex, fn)',
  code: "const texto = 'El precio es 120 y el otro 350';\nconst nuevo = texto.replace(/\\d+/g, function(num){\n  return '[' + num + ']';\n});\nconsole.log(nuevo); // El precio es [120] y el otro [350]"
},
{
  id: 'str-extract-digits',
  title: 'Extraer n√∫meros con regex',
  kind: 'concepto',
  category: 'String',
  description: 'Usando expresiones regulares pod√©s obtener todos los n√∫meros de una cadena.',
  syntax: 'str.match(/\\d+/g)',
  code: "const datos = 'Tel: 381-456-789, C√≥digo: 2025';\nconst numeros = datos.match(/\\d+/g);\nconsole.log(numeros); // ['381','456','789','2025']"
},
{
  id: 'str-remove-spaces',
  title: 'Eliminar espacios con regex',
  kind: 'concepto',
  category: 'String',
  description: 'Pod√©s eliminar espacios extras con replace y una expresi√≥n regular.',
  syntax: 'str.replace(/\\s+/g, " ")',
  code: "const texto = 'Hola     mundo   JS';\nconsole.log(texto.replace(/\\s+/g, ' ')); // Hola mundo JS"
},
{
  id: 'str-remove-accents',
  title: 'Eliminar acentos',
  kind: 'concepto',
  category: 'String',
  description: 'Combinando normalize() y una expresi√≥n regular pod√©s quitar acentos.',
  syntax: 'str.normalize("NFD").replace(/\\p{Diacritic}/gu, "")',
  code: "const palabra = 'cami√≥n';\nconst sinAcentos = palabra.normalize('NFD').replace(/\\p{Diacritic}/gu, '');\nconsole.log(sinAcentos); // camion"
},
{
  id: 'str-template-alt',
  title: 'Construir textos concatenando',
  kind: 'concepto',
  category: 'String',
  description: 'En lugar de usar plantillas con ${}, se pueden unir partes con + y espacios manuales.',
  syntax: 'cadena1 + valor + cadena2',
  code: "const nombre = 'Rub√©n';\nconst saludo = 'Hola ' + nombre + ', bienvenido a la biblioteca JS';\nconsole.log(saludo);"
},
// ==== STRING Y ARRAY: ORDENAMIENTO DE TEXTOS ====
{
  id: 'str-localeCompare-adv',
  title: 'localeCompare()',
  kind: 'm√©todo',
  category: 'String',
  description: 'Compara dos cadenas seg√∫n las reglas del idioma local. Devuelve un n√∫mero negativo si la primera va antes, positivo si va despu√©s y 0 si son iguales.',
  syntax: 'str1.localeCompare(str2, [locale], [opciones])',
  code: "console.log('a'.localeCompare('b')); // -1\nconsole.log('b'.localeCompare('a')); // 1\nconsole.log('a'.localeCompare('a')); // 0\n\n// Comparaci√≥n sin distinguir may√∫sculas\nconsole.log('√°'.localeCompare('a', 'es', { sensitivity: 'base' })); // 0"
},
{
  id: 'arr-sort-localeCompare',
  title: 'sort() con localeCompare()',
  kind: 'm√©todo',
  category: 'Array',
  description: 'Ordena un array de cadenas alfab√©ticamente seg√∫n el idioma, usando localeCompare para resultados m√°s precisos (considera acentos y may√∫sculas).',
  syntax: 'arr.sort((a, b) => a.localeCompare(b, "es"))',
  code: "const frutas = ['pera', 'manzana', 'ar√°ndano', 'kiwi'];\nfrutas.sort((a, b) => a.localeCompare(b, 'es'));\nconsole.log(frutas); // ['ar√°ndano', 'kiwi', 'manzana', 'pera']"
},

    

    // ==== MATH METHODS ====
    {
      id: 'math-round', title:'Math.round()', kind:'m√©todo', category:'Math',
      description:'Redondeo al entero m√°s cercano.', syntax:'Math.round(x)',
      code:`console.log(Math.round(3.6)); // 4` },
    {
      id: 'math-floor', title:'Math.floor()', kind:'m√©todo', category:'Math',
      description:'Redondeo hacia abajo.', syntax:'Math.floor(x)',
      code:`console.log(Math.floor(3.9)); // 3` },
    {
      id: 'math-ceil', title:'Math.ceil()', kind:'m√©todo', category:'Math',
      description:'Redondeo hacia arriba.', syntax:'Math.ceil(x)',
      code:`console.log(Math.ceil(3.1)); // 4` },
    {
      id: 'math-random', title:'Math.random()', kind:'m√©todo', category:'Math',
      description:'N√∫mero pseudo-aleatorio [0,1).', syntax:'Math.random()',
      code:`// Entero 1..6\nconst dado = Math.floor(Math.random()*6)+1;\nconsole.log(dado);` },
    {
      id: 'math-max-min', title:'Math.max()/Math.min()', kind:'m√©todo', category:'Math',
      description:'M√°ximo y m√≠nimo de una lista.', syntax:'Math.max(...arr)',
      code:`console.log(Math.max(2,9,4)); // 9\nconsole.log(Math.min(2,9,4)); // 2` },

    // ==== ARRAY METHODS ====
    { id:'arr-push', title:'push()/pop()', kind:'m√©todo', category:'Array', description:'Agrega/Quita al final.', syntax:'arr.push(x), arr.pop()', code:`const a=[1,2]; a.push(3); console.log(a); a.pop(); console.log(a);` },
    { id:'arr-unshift', title:'unshift()/shift()', kind:'m√©todo', category:'Array', description:'Agrega/Quita al inicio.', syntax:'arr.unshift(x), arr.shift()', code:`const a=[1,2]; a.unshift(0); console.log(a); a.shift(); console.log(a);` },
    { id:'arr-map', title:'map()', kind:'m√©todo', category:'Array', description:'Transforma cada elemento y retorna nuevo array.', syntax:'arr.map(fn)', code:`const dobles=[1,2,3].map(n=>n*2); console.log(dobles);` },
    { id:'arr-filter', title:'filter()', kind:'m√©todo', category:'Array', description:'Filtra seg√∫n condici√≥n.', syntax:'arr.filter(fn)', code:`const pares=[1,2,3,4].filter(n=>n%2===0); console.log(pares);` },
    { id:'arr-reduce', title:'reduce()', kind:'m√©todo', category:'Array', description:'Acumula a un valor.', syntax:'arr.reduce(fn, init?)', code:`const suma=[1,2,3].reduce((acc,n)=>acc+n,0); console.log(suma);` },
    { id:'arr-find', title:'find()/findIndex()', kind:'m√©todo', category:'Array', description:'Primera coincidencia o su √≠ndice.', syntax:'arr.find(fn)', code:`const u=[{id:1},{id:2}]; console.log(u.find(x=>x.id===2));` },
    { id:'arr-some-every', title:'some()/every()', kind:'m√©todo', category:'Array', description:'¬øAlguno cumple? / ¬øTodos cumplen?', syntax:'arr.some(fn), arr.every(fn)', code:`console.log([1,3,5].some(n=>n%2===0)); // false` },
    { id:'arr-includes', title:'includes()', kind:'m√©todo', category:'Array', description:'Contiene un valor.', syntax:'arr.includes(x)', code:`console.log(['a','b'].includes('b'));` },
    {
  id: 'arr-sort-basic',
  title: 'sort() (b√°sico)',
  kind: 'm√©todo',
  category: 'Array',
  description: 'Ordena **in place** y por defecto convierte a string (orden lexicogr√°fico).',
  syntax: 'arr.sort([compareFn])',
  code: "const a = ['10','2','1'];\nconsole.log(a.sort()); // ['1','10','2']  (lexicogr√°fico)"
},
{
  id: 'arr-sort-numeric-asc',
  title: 'sort() num√©rico ascendente',
  kind: 'm√©todo',
  category: 'Array',
  description: 'Us√° una funci√≥n de comparaci√≥n para ordenar n√∫meros correctamente.',
  syntax: 'arr.sort((a,b) => a - b)',
  code: "const nums = [10, 2, 1, 20];\nnums.sort(function(a,b){ return a - b; });\nconsole.log(nums); // [1,2,10,20]"
},
{
  id: 'arr-sort-numeric-desc',
  title: 'sort() num√©rico descendente',
  kind: 'm√©todo',
  category: 'Array',
  description: 'Invert√≠ la comparaci√≥n para ordenar de mayor a menor.',
  syntax: 'arr.sort((a,b) => b - a)',
  code: "const nums = [10, 2, 1, 20];\nnums.sort(function(a,b){ return b - a; });\nconsole.log(nums); // [20,10,2,1]"
},
{
  id: 'arr-sort-objects-key',
  title: 'sort() objetos por clave',
  kind: 'm√©todo',
  category: 'Array',
  description: 'Ordena objetos comparando una propiedad (string o n√∫mero).',
  syntax: 'arr.sort((a,b) => a.clave > b.clave ? 1 : -1)',
  code: "const users = [{n:'Ana',edad:30},{n:'Luis',edad:22},{n:'Mara',edad:25}];\n// Por n√∫mero (edad asc)\nusers.sort(function(a,b){ return a.edad - b.edad; });\nconsole.log(users);\n// Por texto (nombre asc b√°sico)\nusers.sort(function(a,b){ return a.n > b.n ? 1 : -1; });\nconsole.log(users);"
},
{
  id: 'arr-sort-dates',
  title: 'sort() fechas',
  kind: 'm√©todo',
  category: 'Array',
  description: 'Convert√≠ a timestamp para ordenar por fecha.',
  syntax: 'arr.sort((a,b) => new Date(a) - new Date(b))',
  code: "const fechas = ['2025-10-01','2023-05-10','2024-02-20'];\nfechas.sort(function(a,b){ return new Date(a) - new Date(b); });\nconsole.log(fechas); // ['2023-05-10','2024-02-20','2025-10-01']"
},
// ==== ARRAY M√âTODOS AMPLIADOS ====
{
  id: 'arr-at',
  title: 'at()',
  kind: 'm√©todo',
  category: 'Array',
  description: 'Devuelve el elemento en la posici√≥n indicada. Acepta √≠ndices negativos (empieza desde el final).',
  syntax: 'arr.at(indice)',
  code: "const letras = ['a','b','c','d'];\nconsole.log(letras.at(0)); // a\nconsole.log(letras.at(-1)); // d"
},
{
  id: 'arr-flat',
  title: 'flat()',
  kind: 'm√©todo',
  category: 'Array',
  description: 'Aplana arrays anidados hasta la profundidad indicada.',
  syntax: 'arr.flat(profundidad)',
  code: "const nums = [1,[2,[3,[4]]]];\nconsole.log(nums.flat(2)); // [1,2,3,[4]]"
},
{
  id: 'arr-flatMap',
  title: 'flatMap()',
  kind: 'm√©todo',
  category: 'Array',
  description: 'Aplica map() y luego aplana un nivel. Ideal para transformar y aplanar al mismo tiempo.',
  syntax: 'arr.flatMap(fn)',
  code: "const arr = [1,2,3];\nconsole.log(arr.flatMap(x => [x, x*2])); // [1,2,2,4,3,6]"
},
{
  id: 'arr-fill',
  title: 'fill()',
  kind: 'm√©todo',
  category: 'Array',
  description: 'Rellena los elementos con un valor espec√≠fico desde una posici√≥n inicial a final.',
  syntax: 'arr.fill(valor, inicio?, fin?)',
  code: "const a = [1,2,3,4];\na.fill(0,1,3);\nconsole.log(a); // [1,0,0,4]"
},
{
  id: 'arr-reverse',
  title: 'reverse()',
  kind: 'm√©todo',
  category: 'Array',
  description: 'Invierte el orden de los elementos en el mismo array.',
  syntax: 'arr.reverse()',
  code: "const a = [1,2,3];\na.reverse();\nconsole.log(a); // [3,2,1]"
},
{
  id: 'arr-join',
  title: 'join()',
  kind: 'm√©todo',
  category: 'Array',
  description: 'Convierte todos los elementos en una cadena, separados por el delimitador dado.',
  syntax: 'arr.join(separador)',
  code: "const colores = ['rojo','verde','azul'];\nconsole.log(colores.join('-')); // rojo-verde-azul"
},
{
  id: 'arr-slice',
  title: 'slice()',
  kind: 'm√©todo',
  category: 'Array',
  description: 'Devuelve una copia parcial del array, sin modificar el original.',
  syntax: 'arr.slice(inicio, fin?)',
  code: "const n = [10,20,30,40];\nconsole.log(n.slice(1,3)); // [20,30]"
},
{
  id: 'arr-splice',
  title: 'splice()',
  kind: 'm√©todo',
  category: 'Array',
  description: 'Agrega o elimina elementos en el mismo array. Modifica el original.',
  syntax: 'arr.splice(inicio, cantidad, ...items)',
  code: "const a = ['a','b','c'];\na.splice(1,1,'x','y');\nconsole.log(a); // ['a','x','y','c']"
},
{
  id: 'arr-findLast',
  title: 'findLast() / findLastIndex()',
  kind: 'm√©todo',
  category: 'Array',
  description: 'Devuelven el √∫ltimo elemento (o √≠ndice) que cumpla con la condici√≥n.',
  syntax: 'arr.findLast(fn), arr.findLastIndex(fn)',
  code: "const nums = [1,4,7,4,1];\nconsole.log(nums.findLast(x => x === 4)); // 4\nconsole.log(nums.findLastIndex(x => x === 4)); // 3"
},
{
  id: 'arr-every',
  title: 'every()',
  kind: 'm√©todo',
  category: 'Array',
  description: 'Verifica si todos los elementos cumplen una condici√≥n.',
  syntax: 'arr.every(fn)',
  code: "const edades = [20,25,30];\nconsole.log(edades.every(e => e >= 18)); // true"
},
{
  id: 'arr-some',
  title: 'some()',
  kind: 'm√©todo',
  category: 'Array',
  description: 'Verifica si al menos uno de los elementos cumple la condici√≥n.',
  syntax: 'arr.some(fn)',
  code: "const nums = [1,3,5,8];\nconsole.log(nums.some(n => n % 2 === 0)); // true"
},
{
  id: 'arr-from',
  title: 'Array.from()',
  kind: 'm√©todo est√°tico',
  category: 'Array',
  description: 'Crea un nuevo array a partir de un iterable (NodeList, Set, String, etc.).',
  syntax: 'Array.from(iterable, mapFn?)',
  code: "const str = 'hola';\nconsole.log(Array.from(str)); // ['h','o','l','a']"
},
{
  id: 'arr-isArray',
  title: 'Array.isArray()',
  kind: 'm√©todo est√°tico',
  category: 'Array',
  description: 'Verifica si el valor proporcionado es un array.',
  syntax: 'Array.isArray(valor)',
  code: "console.log(Array.isArray([1,2,3])); // true\nconsole.log(Array.isArray('texto')); // false"
},
{
  id: 'arr-reduceRight',
  title: 'reduceRight()',
  kind: 'm√©todo',
  category: 'Array',
  description: 'Similar a reduce(), pero recorre el array desde el final hacia el inicio.',
  syntax: 'arr.reduceRight(fn, inicial)',
  code: "const letras = ['a','b','c'];\nconst rev = letras.reduceRight(function(acc,l){ return acc + l; }, '');\nconsole.log(rev); // cba"
},
{
  id: 'arr-toSorted',
  title: 'toSorted() (ES2023)',
  kind: 'm√©todo',
  category: 'Array',
  description: 'Devuelve una copia ordenada sin modificar el array original (versi√≥n inmutable de sort()).',
  syntax: 'arr.toSorted(fn)',
  code: "const n = [3,1,2];\nconst ordenado = n.toSorted(function(a,b){ return a - b; });\nconsole.log(ordenado); // [1,2,3]\nconsole.log(n); // [3,1,2]"
},
{
  id: 'arr-toReversed',
  title: 'toReversed() (ES2023)',
  kind: 'm√©todo',
  category: 'Array',
  description: 'Devuelve una copia invertida del array sin modificar el original.',
  syntax: 'arr.toReversed()',
  code: "const a = [1,2,3];\nconsole.log(a.toReversed()); // [3,2,1]\nconsole.log(a); // [1,2,3]"
},
{
  id: 'arr-groupBy',
  title: 'groupBy() (ES2024)',
  kind: 'm√©todo',
  category: 'Array',
  description: 'Agrupa los elementos del array en un objeto seg√∫n el resultado de la funci√≥n dada.',
  syntax: 'Object.groupBy(arr, fn)',
  code: "const frutas = ['manzana','mango','pera','mel√≥n'];\nconst grupos = Object.groupBy(frutas, f => f[0]);\nconsole.log(grupos); // { m: ['manzana','mango','mel√≥n'], p: ['pera'] }"
},
// ==== ARRAY EJERCICIOS ====
{
  id: 'arr-ej1-suma',
  title: 'Suma de elementos',
  kind: 'ejercicio',
  category: 'Array',
  description: 'Suma todos los n√∫meros de un array usando reduce().',
  syntax: 'arr.reduce(fn, inicial)',
  code: "const numeros = [2, 5, 8, 3];\nconst suma = numeros.reduce(function(acc, n){ return acc + n; }, 0);\nconsole.log('Suma total:', suma);"
},
{
  id: 'arr-ej2-max-min',
  title: 'M√°ximo y m√≠nimo',
  kind: 'ejercicio',
  category: 'Array',
  description: 'Obtiene el n√∫mero mayor y menor de un array.',
  syntax: 'Math.max(...arr), Math.min(...arr)',
  code: "const nums = [15, 3, 27, 8];\nconsole.log('M√°ximo:', Math.max(...nums));\nconsole.log('M√≠nimo:', Math.min(...nums));"
},
{
  id: 'arr-ej3-par-impar',
  title: 'Separar pares e impares',
  kind: 'ejercicio',
  category: 'Array',
  description: 'Divide los n√∫meros en dos arrays: pares e impares.',
  syntax: 'arr.filter(fn)',
  code: "const numeros = [1,2,3,4,5,6,7,8];\nconst pares = numeros.filter(function(n){ return n % 2 === 0; });\nconst impares = numeros.filter(function(n){ return n % 2 !== 0; });\nconsole.log('Pares:', pares);\nconsole.log('Impares:', impares);"
},
{
  id: 'arr-ej4-promedio',
  title: 'Promedio de notas',
  kind: 'ejercicio',
  category: 'Array',
  description: 'Calcula el promedio de una lista de notas.',
  syntax: 'reduce() / length',
  code: "const notas = [7,8,9,6,10];\nconst promedio = notas.reduce(function(acc,n){ return acc + n; },0) / notas.length;\nconsole.log('Promedio:', promedio.toFixed(2));"
},
{
  id: 'arr-ej5-duplicados',
  title: 'Eliminar duplicados',
  kind: 'ejercicio',
  category: 'Array',
  description: 'Elimina valores repetidos usando Set.',
  syntax: '[...new Set(arr)]',
  code: "const datos = [1,2,2,3,4,4,5];\nconst sinDuplicados = [...new Set(datos)];\nconsole.log(sinDuplicados);"
},
{
  id: 'arr-ej6-contar',
  title: 'Contar ocurrencias',
  kind: 'ejercicio',
  category: 'Array',
  description: 'Cuenta cu√°ntas veces aparece cada elemento.',
  syntax: 'reduce() con objeto acumulador',
  code: "const frutas = ['manzana','pera','manzana','banana'];\nconst conteo = frutas.reduce(function(acc, f){\n  acc[f] = (acc[f] || 0) + 1;\n  return acc;\n}, {});\nconsole.log(conteo);"
},
{
  id: 'arr-ej7-flatten',
  title: 'Aplanar array anidado',
  kind: 'ejercicio',
  category: 'Array',
  description: 'Convierte un array con subarrays en uno plano.',
  syntax: 'arr.flat()',
  code: "const nested = [1,[2,3],[4,[5,6]]];\nconst plano = nested.flat(2);\nconsole.log(plano);"
},
{
  id: 'arr-ej8-reversa',
  title: 'Invertir array sin modificarlo',
  kind: 'ejercicio',
  category: 'Array',
  description: 'Usa toReversed() (ES2023) o slice().reverse() para no alterar el original.',
  syntax: 'arr.toReversed() o arr.slice().reverse()',
  code: "const a = [1,2,3,4];\nconst invertido = a.slice().reverse();\nconsole.log('Original:', a);\nconsole.log('Invertido:', invertido);"
},
{
  id: 'arr-ej9-multiplicar',
  title: 'Multiplicar todos los elementos',
  kind: 'ejercicio',
  category: 'Array',
  description: 'Calcula el producto de todos los valores del array.',
  syntax: 'reduce() con multiplicaci√≥n',
  code: "const nums = [2,3,4];\nconst producto = nums.reduce(function(acc, n){ return acc * n; }, 1);\nconsole.log('Producto total:', producto);"
},
{
  id: 'arr-ej10-mezclar',
  title: 'Mezclar elementos (shuffle)',
  kind: 'ejercicio',
  category: 'Array',
  description: 'Desordena los elementos del array aleatoriamente.',
  syntax: 'sort(() => Math.random() - 0.5)',
  code: "const letras = ['A','B','C','D','E'];\nletras.sort(function(){ return Math.random() - 0.5; });\nconsole.log('Mezcladas:', letras);"
},
{
  id: 'arr-ej11-filtrar-objetos',
  title: 'Filtrar objetos por propiedad',
  kind: 'ejercicio',
  category: 'Array',
  description: 'Obtiene los elementos cuyo campo cumpla una condici√≥n.',
  syntax: 'arr.filter(obj => obj.prop === valor)',
  code: "const usuarios = [\n  {nombre:'Ana', activo:true},\n  {nombre:'Luis', activo:false},\n  {nombre:'Mara', activo:true}\n];\nconst activos = usuarios.filter(function(u){ return u.activo; });\nconsole.log(activos);"
},
{
  id: 'arr-ej12-mapeo-objetos',
  title: 'Extraer una propiedad de cada objeto',
  kind: 'ejercicio',
  category: 'Array',
  description: 'Crea un nuevo array solo con los nombres de los objetos.',
  syntax: 'arr.map(obj => obj.prop)',
  code: "const productos = [\n  {id:1, nombre:'Mouse'},\n  {id:2, nombre:'Teclado'},\n  {id:3, nombre:'Monitor'}\n];\nconst nombres = productos.map(function(p){ return p.nombre; });\nconsole.log(nombres);"
},
{
  id: 'arr-ej13-ordenar-strings',
  title: 'Ordenar palabras alfab√©ticamente',
  kind: 'ejercicio',
  category: 'Array',
  description: 'Ordena un array de palabras usando sort() y localeCompare().',
  syntax: 'arr.sort((a,b) => a.localeCompare(b))',
  code: "const palabras = ['pera','manzana','ar√°ndano','kiwi'];\npalabras.sort(function(a,b){ return a.localeCompare(b); });\nconsole.log(palabras);"
},
{
  id: 'arr-ej14-combinar',
  title: 'Combinar arrays',
  kind: 'ejercicio',
  category: 'Array',
  description: 'Une varios arrays en uno solo usando spread operator.',
  syntax: '[...arr1, ...arr2]',
  code: "const a = [1,2];\nconst b = [3,4];\nconst combinado = [...a, ...b];\nconsole.log(combinado); // [1,2,3,4]"
},
{
  id: 'arr-ej15-transformar',
  title: 'Transformar datos (map)',
  kind: 'ejercicio',
  category: 'Array',
  description: 'Usa map() para crear un nuevo array con valores transformados.',
  syntax: 'arr.map(fn)',
  code: "const precios = [100, 200, 300];\nconst conIVA = precios.map(function(p){ return p * 1.21; });\nconsole.log(conIVA);"
},

    

    // ==== LOOPS ====
    { id:'loop-for', title:'for', kind:'concepto', category:'Bucles', description:'Iteraci√≥n con contador.', syntax:'for (let i=0;i<n;i++) {...}', code:`for (let i=0;i<3;i++){ console.log('i =', i); }` },
    { id:'loop-do', title:'do', kind:'concepto', category:'Bucles', description:'Ejecuta al menos una vez.', syntax:'do { ... } while (cond)', code:`let i=0; do { console.log(i); i++; } while(i<3);` },
    { id:'loop-do-while', title:'do...while', kind:'concepto', category:'Bucles', description:'Variante que eval√∫a al final.', syntax:'do { ... } while (cond)', code:`let p=5; do{ console.log('p', p); p--; }while(p>2);` },

    // ==== SWITCH ====
    { id:'switch-basic', title:'switch', kind:'concepto', category:'Switch', description:'Selecci√≥n m√∫ltiple.', syntax:'switch(x){case A:...; break; default:...}', code:`const rol='admin';\nswitch(rol){\n  case 'admin': console.log('Panel completo'); break;\n  case 'editor': console.log('Panel parcial'); break;\n  default: console.log('Invitado');\n}` },

    // ==== DOM COMPLETO (resumen pr√°ctico) ====
    { id:'dom-selectores', title:'Selectores (querySelector / All)', kind:'API', category:'DOM', description:'Obtiene nodos del documento.', syntax:"document.querySelector(sel)", code:`const h1 = document.querySelector('h1');\nconsole.log(h1?.textContent);` },
    { id:'dom-crear', title:'Crear/insertar nodos', kind:'API', category:'DOM', description:'createElement, append, before‚Ä¶', syntax:'document.createElement(tag)', code:`const el = document.createElement('div');\nel.textContent = 'Hola DOM';\nel.className = 'p-2';\ndocument.body.append(el);` },
    { id:'dom-clases', title:'classList', kind:'API', category:'DOM', description:'Agregar/quitar/toggle clases.', syntax:'el.classList.add(name)', code:`const box = document.createElement('div');\nbox.classList.add('p-2');\nbox.classList.toggle('rounded');\ndocument.body.append(box);` },
    { id:'dom-atributos', title:'Atributos', kind:'API', category:'DOM', description:'setAttribute/getAttribute', syntax:'el.setAttribute(name,val)', code:`const a=document.createElement('a');\na.setAttribute('href','#'); a.textContent='link';\ndocument.body.append(a);` },
    { id:'dom-eventos', title:'Eventos (addEventListener)', kind:'API', category:'DOM', description:'Escuchar y manejar eventos.', syntax:'el.addEventListener(tipo, fn)', code:`const btn=document.createElement('button');\nbtn.textContent='Click!';\nbtn.addEventListener('click', ()=>console.log('clicked'));\ndocument.body.append(btn);` },
    // ==== DOM AMPLIADO ====
{
  id: 'dom-getElementById',
  title: 'getElementById()',
  kind: 'API',
  category: 'DOM',
  description: 'Selecciona un elemento por su atributo id. Devuelve un solo elemento o null si no existe.',
  syntax: 'document.getElementById(id)',
  code: `// HTML: <h1 id="titulo">Hola</h1>
const el = document.getElementById('titulo');
console.log(el.textContent);`
},
{
  id: 'dom-querySelectorAll',
  title: 'querySelectorAll()',
  kind: 'API',
  category: 'DOM',
  description: 'Devuelve una NodeList (similar a array) con todos los elementos que coincidan con el selector.',
  syntax: 'document.querySelectorAll(sel)',
  code: `// HTML: <p>1</p><p>2</p><p>3</p>
const ps = document.querySelectorAll('p');
ps.forEach(p => console.log(p.textContent));`
},
{
  id: 'dom-innerHTML',
  title: 'innerHTML',
  kind: 'propiedad',
  category: 'DOM',
  description: 'Permite leer o establecer contenido HTML dentro de un elemento.',
  syntax: 'element.innerHTML',
  code: `const div = document.createElement('div');
div.innerHTML = '<b>Hola</b> mundo';
document.body.append(div);
console.log(div.innerHTML);`
},
{
  id: 'dom-textContent',
  title: 'textContent',
  kind: 'propiedad',
  category: 'DOM',
  description: 'Devuelve o define el texto de un nodo sin interpretar etiquetas HTML.',
  syntax: 'element.textContent',
  code: `const el = document.createElement('p');
el.textContent = '<b>Sin formato</b>';
document.body.append(el);`
},
{
  id: 'dom-style',
  title: 'style',
  kind: 'propiedad',
  category: 'DOM',
  description: 'Permite modificar estilos en l√≠nea del elemento.',
  syntax: 'element.style.prop = valor',
  code: `const box = document.createElement('div');
box.textContent = 'Caja';
box.style.background = 'orange';
box.style.padding = '10px';
document.body.append(box);`
},
{
  id: 'dom-appendChild',
  title: 'appendChild() / removeChild()',
  kind: 'm√©todo',
  category: 'DOM',
  description: 'Agrega o elimina nodos hijos en un elemento padre.',
  syntax: 'parent.appendChild(node)',
  code: `const lista = document.createElement('ul');
const li = document.createElement('li');
li.textContent = 'Elemento 1';
lista.appendChild(li);
document.body.append(lista);
lista.removeChild(li);`
},
{
  id: 'dom-insertAdjacent',
  title: 'insertAdjacentHTML()',
  kind: 'm√©todo',
  category: 'DOM',
  description: 'Inserta HTML en una posici√≥n relativa al elemento: beforebegin, afterbegin, beforeend, afterend.',
  syntax: 'element.insertAdjacentHTML(pos, html)',
  code: `document.body.insertAdjacentHTML('afterbegin', '<h3>Insertado din√°micamente</h3>');`
},
{
  id: 'dom-parent-child',
  title: 'parentNode / children',
  kind: 'propiedad',
  category: 'DOM',
  description: 'Permite navegar la jerarqu√≠a de nodos: obtener el padre, hijos, primer o √∫ltimo hijo.',
  syntax: 'el.parentNode, el.children',
  code: `const cont = document.createElement('div');
cont.innerHTML = '<p>A</p><p>B</p>';
document.body.append(cont);
console.log(cont.children.length);`
},
{
  id: 'dom-evento-input',
  title: 'Eventos de entrada (input/change)',
  kind: 'API',
  category: 'DOM',
  description: 'Permite capturar la entrada del usuario en tiempo real o al cambiar el valor.',
  syntax: 'element.addEventListener("input", fn)',
  code: `const input = document.createElement('input');
input.placeholder = 'Escribe algo';
document.body.append(input);
input.addEventListener('input', ()=> console.log(input.value));`
},
{
  id: 'dom-event-delegation',
  title: 'Delegaci√≥n de eventos',
  kind: 'concepto',
  category: 'DOM',
  description: 'Permite manejar eventos desde un elemento padre para muchos hijos, √∫til en listas din√°micas.',
  syntax: 'parent.addEventListener("click", fn)',
  code: `const ul = document.createElement('ul');
ul.innerHTML = '<li>A</li><li>B</li><li>C</li>';
document.body.append(ul);

ul.addEventListener('click', e => {
  if(e.target.tagName === 'LI'){
    console.log('Click en', e.target.textContent);
  }
});`
},
{
  id: 'dom-setTimeout-interval',
  title: 'Timers y DOM',
  kind: 'concepto',
  category: 'DOM',
  description: 'Los m√©todos setTimeout y setInterval pueden manipular el DOM con retardo o repetici√≥n.',
  syntax: 'setTimeout(fn, ms), setInterval(fn, ms)',
  code: `const msg = document.createElement('div');
document.body.append(msg);
let n=0;
setInterval(()=>{ msg.textContent = 'Contador: '+(++n); },1000);`
},


    // ==== OBJETOS ====
    { id:'obj-literal', title:'Objeto literal', kind:'concepto', category:'Objetos', description:'Clave/valor, m√©todos.', syntax:'const o = {a:1, b(){}}', code:`const user={ nombre:'Ana', saludar(){ return 'Hola '+this.nombre; } };\nconsole.log(user.saludar());` },
    { id:'obj-destructuring', title:'Destructuring', kind:'concepto', category:'Objetos', description:'Extrae propiedades f√°cilmente.', syntax:'const {a,b} = obj', code:`const conf={tema:'dark', lang:'es'};\nconst {tema} = conf;\nconsole.log(tema);` },
    { id:'obj-spread', title:'Spread/Rest', kind:'concepto', category:'Objetos', description:'Copiar/combinar objetos.', syntax:'{...obj}', code:`const base={a:1};\nconst ext={...base, b:2};\nconsole.log(ext);` },

    // ==== CRUD MINI DEMO (en memoria) ====
    { id:'crud-mini', title:'CRUD (mini demo in-memory)', kind:'concepto', category:'CRUD', description:'Crear/Leer/Actualizar/Borrar sobre un array.', syntax:'add/read/update/delete', code:`// CRUD simple sobre un array de tareas\nlet tareas=[];\n// C: create\nfunction crear(titulo){ tareas.push({id:Date.now(), titulo, done:false}); }\n// R: read\nfunction listar(){ return tareas; }\n// U: update\nfunction completar(id){ const t=tareas.find(x=>x.id===id); if(t) t.done=!t.done; }\n// D: delete\nfunction eliminar(id){ tareas = tareas.filter(x=>x.id!==id); }\n\ncrear('Aprender map');\ncrear('Practicar DOM');\nconsole.log('Inicial:', listar());\nconst id=tareas[0].id;\ncompletar(id);\nconsole.log('Despu√©s de completar:', listar());\neliminar(id);\nconsole.log('Despu√©s de eliminar:', listar());` },
  ];

  // ==== CATEGOR√çAS EN ORDEN ====
  const CATEGORY_ORDER = ['String','Math','Array','Bucles','Switch','DOM','Objetos','CRUD'];

  // ==== RENDER NAV ====
  const nav = document.getElementById('categoryNav');
  CATEGORY_ORDER.forEach(cat=>{
    const a=document.createElement('a');
    a.href = `#${cat}`;
    a.dataset.category = cat;
    a.className='nav-link px-3 py-2';
    a.textContent = cat;
    a.addEventListener('click', (e)=>{
      e.preventDefault();
      selectCategory(cat);
      document.querySelectorAll('#categoryNav .nav-link').forEach(n=>n.classList.remove('active'));
      a.classList.add('active');
    });
    nav.append(a);
  });

  // ==== RENDER CARDS ====
  const cardsContainer = document.getElementById('cardsContainer');
  const titleEl = document.getElementById('title');
  const countBadge = document.getElementById('countBadge');

  function renderCards(items, heading){
    titleEl.textContent = heading || 'Resultados';
    countBadge.textContent = `${items.length} item${items.length!==1?'s':''}`;

    cardsContainer.innerHTML='';
    items.forEach(item=>{
      const col = document.createElement('div');
      col.className='col-12 col-md-6 col-xl-4';

      const card = document.createElement('div');
      card.className='card h-100';

      const body = document.createElement('div');
      body.className='card-body';

      const h5 = document.createElement('h5');
      h5.className='card-title d-flex justify-content-between align-items-start';
      h5.innerHTML = `<span>${item.title}</span> <span class="method-badge">${item.kind}</span>`;

      const small = document.createElement('div');
      small.className='text-secondary mb-2';
      small.textContent = `${item.category} ‚Ä¢ ${item.syntax}`;

      const p = document.createElement('p');
      p.className='card-text';
      p.textContent = item.description;

      const pre = document.createElement('pre');
      pre.className='code-toolbar position-relative';
      const code = document.createElement('code');
      code.className='language-js';
      code.contentEditable = true;
      code.spellcheck = false;
      code.textContent = item.code;
      pre.append(code);

      const run = document.createElement('button');
      run.className='btn btn-sm btn-light run-btn';
      run.textContent='Ejecutar';
      run.addEventListener('click', ()=> runSnippet(code.innerText, out));
      pre.append(run);

      const out = document.createElement('div');
      out.className='output mt-2';
      out.textContent = 'Salida‚Ä¶';

      body.append(h5, small, p, pre, out);
      card.append(body);
      col.append(card);
      cardsContainer.append(col);

      // destacar
      try{ hljs.highlightElement(code); }catch{ /* ignore */ }
    });
  }

  // ==== RUNNER ====
  function runSnippet(src, outputEl){
    // Capturar console.log
    const logs = [];
    const origLog = console.log;
    console.log = (...args)=>{
      logs.push(args.map(a=>{
        try{ return typeof a==='object' ? JSON.stringify(a, null, 2) : String(a); }
        catch{ return String(a); }
      }).join(' '));
      origLog.apply(console, args);
    };

    // Ejecutar aislado
    try{
      new Function(src)();
      outputEl.textContent = logs.join('\n') || '(sin salida)';
    }catch(err){
      outputEl.textContent = '‚ö†Ô∏è Error: ' + err.message;
    }finally{
      console.log = origLog;
    }
  }

  // ==== CATEGORY FILTER ====
  function selectCategory(cat){
    const items = DATA.filter(x=>x.category===cat);
    renderCards(items, cat);
    // Marcar en nav
    const link = [...document.querySelectorAll('#categoryNav .nav-link')].find(a=>a.dataset.category===cat);
    if(link){ link.classList.add('active'); }
    // Actualizar hash
    location.hash = cat;
  }

  // ==== SEARCH ====
  const search = document.getElementById('searchInput');
  search.addEventListener('input', ()=>{
    const q = search.value.trim().toLowerCase();
    if(!q){
      const cat = currentCategory() || CATEGORY_ORDER[0];
      selectCategory(cat);
    }else{
      const items = DATA.filter(x=> `${x.title} ${x.category} ${x.syntax} ${x.description}`.toLowerCase().includes(q));
      renderCards(items, `Resultados para "${q}"`);
    }
  });
  // Atajo '/'
  document.addEventListener('keydown', (e)=>{
    if(e.key === '/' && document.activeElement !== search){ e.preventDefault(); search.focus(); }
  });

  function currentCategory(){ return location.hash?.replace('#',''); }

  // Inicializaci√≥n
  (function init(){
    // Render nav + categor√≠a inicial
    const initial = currentCategory() && CATEGORY_ORDER.includes(currentCategory()) ? currentCategory() : CATEGORY_ORDER[0];
    selectCategory(initial);
  })();
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
